<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sven Nelson">
<meta name="dcterms.date" content="2024-06-03">

<title>Data Science Tutorials - Setting up local LLMs using ollama</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Data Science Tutorials</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Setting up local LLMs using ollama</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Sven Nelson </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 3, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="getting-started-in-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="getting-started-in-rstudio">Getting started in RStudio</h2>
<ul>
<li>Brief overview</li>
<li>Projects</li>
<li>Github</li>
<li>(very brief) Quarto/this blog</li>
</ul>
</section>
<section id="installing-local-llms" class="level2">
<h2 class="anchored" data-anchor-id="installing-local-llms">Installing local LLMs</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://ollama.com/"><img src="https://ollama.com/public/ollama.png" class="img-fluid figure-img" width="100"></a></p>
</figure>
</div>
<section id="ollama" class="level3">
<h3 class="anchored" data-anchor-id="ollama">Ollama</h3>
<p>Ollama is an open-source framework that allows users to run and manage large language models (LLMs) locally on their machines.</p>
<ol type="1">
<li><p>Download ollama and install (available for Mac, Linux, and Windows).</p>
<ul>
<li><a href="https://ollama.com/" class="uri">https://ollama.com/</a></li>
</ul></li>
<li><p>Run ollama for the first time, you will see a llama icon in your menu bar.</p></li>
<li><p>Now you can run your first test with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ollama</span> run llama3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will download the model <code>llama3</code> and start an interactive chat session.</p>
<p>When you are done, end chat with <code>\bye</code></p>
<p><strong>You can download many other models using this terminal command:</strong></p>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>Parameters</th>
<th>Size</th>
<th>Download</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Llama 3</td>
<td>8B</td>
<td>4.7GB</td>
<td><code>ollama run llama3</code></td>
</tr>
<tr class="even">
<td>Llama 3</td>
<td>70B</td>
<td>40GB</td>
<td><code>ollama run llama3:70b</code></td>
</tr>
<tr class="odd">
<td>Phi 3 Mini</td>
<td>3.8B</td>
<td>2.3GB</td>
<td><code>ollama run phi3</code></td>
</tr>
<tr class="even">
<td>Phi 3 Medium</td>
<td>14B</td>
<td>7.9GB</td>
<td><code>ollama run phi3:medium</code></td>
</tr>
<tr class="odd">
<td>Gemma</td>
<td>2B</td>
<td>1.4GB</td>
<td><code>ollama run gemma:2b</code></td>
</tr>
<tr class="even">
<td>Gemma</td>
<td>7B</td>
<td>4.8GB</td>
<td><code>ollama run gemma:7b</code></td>
</tr>
<tr class="odd">
<td>Mistral</td>
<td>7B</td>
<td>4.1GB</td>
<td><code>ollama run mistral</code></td>
</tr>
<tr class="even">
<td>Moondream 2</td>
<td>1.4B</td>
<td>829MB</td>
<td><code>ollama run moondream</code></td>
</tr>
<tr class="odd">
<td>Neural Chat</td>
<td>7B</td>
<td>4.1GB</td>
<td><code>ollama run neural-chat</code></td>
</tr>
<tr class="even">
<td>Starling</td>
<td>7B</td>
<td>4.1GB</td>
<td><code>ollama run starling-lm</code></td>
</tr>
<tr class="odd">
<td>Code Llama</td>
<td>7B</td>
<td>3.8GB</td>
<td><code>ollama run codellama</code></td>
</tr>
<tr class="even">
<td>Llama 2 Uncensored</td>
<td>7B</td>
<td>3.8GB</td>
<td><code>ollama run llama2-uncensored</code></td>
</tr>
<tr class="odd">
<td>LLaVA</td>
<td>7B</td>
<td>4.5GB</td>
<td><code>ollama run llava</code></td>
</tr>
<tr class="even">
<td>Solar</td>
<td>10.7B</td>
<td>6.1GB</td>
<td><code>ollama run solar</code></td>
</tr>
</tbody>
</table></li>
</ol>
<blockquote class="blockquote">
<p>Note: You should have at least 8 GB of RAM available to run the 7B models, 16 GB to run the 13B models, and 32 GB to run the 33B models.</p>
</blockquote>
</section>
<section id="open-webui-graphical-chat-app-for-ollama-models" class="level3">
<h3 class="anchored" data-anchor-id="open-webui-graphical-chat-app-for-ollama-models">Open WebUI graphical chat app for ollama models</h3>
<p>It would be nicer if we had a GUI chat interface to interact with the model and could get code responses in syntax-highlighted code blocks. We can do that and more by installing Open WebUI.</p>
<p>Open WebUI can also be used with non-local models like ChatGPT and Github Copilot, but we will focus on local LLMs for this tutorial.</p>
<p>Open WebUI: <a href="https://github.com/open-webui/open-webui" class="uri">https://github.com/open-webui/open-webui</a></p>
<ol type="1">
<li><p>You will need to have docker installed. The easiest method is to download and install Docker Desktop from here: <a href="https://www.docker.com/products/docker-desktop/" class="uri">https://www.docker.com/products/docker-desktop/</a></p>
<ul>
<li><em>Docker Desktop is free and can be used for commercial use for companies up to 250 employees OR $10 million in yearly revenue.</em></li>
</ul></li>
<li><p>Once Docker Desktop is installed, run it. This will enable you to use the <code>docker</code> command from the terminal.</p>
<ul>
<li>There are other ways to install docker, you just need to be able to run <code>docker</code> and <code>docker compose</code> commands.</li>
</ul></li>
<li><p>Install and run Open WebUI with the following command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">-p</span> 3000:8080 <span class="at">--add-host</span><span class="op">=</span>host.docker.internal:host-gateway <span class="at">-v</span> open-webui:/app/backend/data <span class="at">--name</span> open-webui <span class="at">--restart</span> always ghcr.io/open-webui/open-webui:main</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>In a web browser go to <a href="http://localhost:3000" class="uri">http://localhost:3000</a></p>
<ul>
<li><p>Open WebUI will load</p></li>
<li><p>You can install additional models from the menu</p>
<ul>
<li>Install <code>llama3:instruct</code>, we will need it later.</li>
</ul></li>
<li><p>You can save conversation chains</p></li>
<li><p>You can select multiple models and ask a question and it will select the best suited model to answer your question.</p></li>
</ul></li>
<li><p><em>(bonus)</em> For anyone running MacOS 13 or higher, open the link in Safari and from the menu bar, choose File &gt; Add to Dock. This will create a standalone webapp.</p>
<ul>
<li>More info here: <a href="https://support.apple.com/en-us/104996" class="uri">https://support.apple.com/en-us/104996</a></li>
</ul></li>
</ol>
</section>
</section>
<section id="installing-danswer-for-rag-with-ollama-models" class="level2">
<h2 class="anchored" data-anchor-id="installing-danswer-for-rag-with-ollama-models">Installing Danswer for RAG with ollama models</h2>
<p>RAG stands for Retrieval-Augmented Generation. So far our models can answer questions and are great for giving code examples, but the model cannot access a web page or pull information from local documents. With Danswer, we can allow ollama models to do exactly that.</p>
<p>Danswer: <a href="https://www.danswer.ai/" class="uri">https://www.danswer.ai/</a></p>
<p>Danswer Github: <a href="https://github.com/danswer-ai/danswer" class="uri">https://github.com/danswer-ai/danswer</a></p>
<p>This install is a little more involved than the last.</p>
<ol type="1">
<li><p>Go to the Danswer website (<a href="https://www.danswer.ai/" class="uri">https://www.danswer.ai/</a>) and click “Self-host for Free.”</p>
<ul>
<li><p>This will take you here: <a href="https://docs.danswer.dev/quickstart" class="uri">https://docs.danswer.dev/quickstart</a></p></li>
<li><p>We will follow the instructions on that page (and then make some changes)</p></li>
</ul></li>
<li><p>Clone the <a href="https://github.com/danswer-ai/danswer"><strong>Danswer</strong></a> repo:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/danswer-ai/danswer.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Navigate to <strong>danswer/deployment/docker_compose</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> danswer/deployment/docker_compose</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Edit the file <code>danswer/deployment/docker_compose/docker-compose.dev.yml</code></p>
<ul>
<li><p>Find <code>"3000:80"</code> and change it to <code>"3001:80"</code></p></li>
<li><p>This will make the webapp available at <a href="http://localhost:3001" class="uri">http://localhost:3001</a> since we are already using port <code>3000</code> for Open WebUI</p></li>
</ul></li>
<li><p>To connect danswer to ollama, create a file called <code>.env</code> in the <code>danswer/deployment/docker_compose</code> directory:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">touch</span> .env</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Add the following to the file:</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="at">GEN_AI_MODEL_PROVIDER=ollama_chat</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Model of your choice</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">GEN_AI_MODEL_VERSION=llama3:instruct</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Wherever Ollama is running</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Hint: To point Docker containers to http://localhost:11434, use host.docker.internal instead of localhost</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="at">GEN_AI_API_ENDPOINT=http://host.docker.internal:11434</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's also make some changes to accommodate the weaker locally hosted LLM</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="at">QA_TIMEOUT=120</span><span class="co">  # Set a longer timeout, running models on CPU can be slow</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Always run search, never skip</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="at">DISABLE_LLM_CHOOSE_SEARCH=True</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't use LLM for reranking, the prompts aren't properly tuned for these models</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="at">DISABLE_LLM_CHUNK_FILTER=True</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't try to rephrase the user query, the prompts aren't properly tuned for these models</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="at">DISABLE_LLM_QUERY_REPHRASE=True</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Don't use LLM to automatically discover time/source filters</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="at">DISABLE_LLM_FILTER_EXTRACTION=True</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Uncomment this one if you find that the model is struggling (slow or distracted by too many docs)</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Use only 1 section from the documents and do not require quotes</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="at">QA_PROMPT_OVERRIDE=weak</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>IMPORTANT:</strong> Add an empty return at the end. The final empty line at the end appears important.</li>
</ul></li>
<li><p>Make sure Docker Desktop is running.</p></li>
<li><p>To start the application run: (run this from within <code>danswer/deployment/docker_compose</code>)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose <span class="at">-f</span> docker-compose.dev.yml <span class="at">-p</span> danswer-stack up <span class="at">-d</span> <span class="at">--pull</span> always <span class="at">--force-recreate</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>This step may take a little while to download everything and install.</li>
</ul></li>
<li><p>Go to <a href="http://localhost:3001" class="uri">http://localhost:3001</a> to load the webapp</p>
<ul>
<li><p>You will need to set up the app before you can start using it:</p>
<ol type="1">
<li>Go to “<strong>Search / Chat with Knowledge” &gt; “Get started”</strong></li>
<li>Select the “Custom” tab</li>
<li>Fill in the following values: (<strong>none of these are optional even if it say it is</strong>)
<ul>
<li><p>Display Name: ollama</p></li>
<li><p>Provide Name: ollama</p></li>
<li><p>API Base: http://host.docker.internal:11434</p></li>
<li><p>Model Names:</p>
<ul>
<li><p>llama3:instruct</p></li>
<li><p>llama3:latest</p></li>
<li><p><em>(you can add more here if you have more installed)</em></p></li>
</ul></li>
<li><p>Default Model: llama3:instruct</p></li>
</ul></li>
<li>Click “Test” to see if all of your settings are correct.
<ul>
<li><p>If it’s successful, you may be good to go</p></li>
<li><p>You will know for sure once you test running a chat.</p></li>
</ul></li>
<li>Click “Enable”</li>
<li>Click “Setup your first connector”
<ul>
<li><p>You can add a document or link to include in your search</p></li>
<li><p>Danswer also makes it possible to link popular services like Slack and Google docs</p></li>
<li><p>Try to keep your document/website size small enough. If you try to index all of Google your connector will fail.</p></li>
</ul></li>
</ol></li>
</ul></li>
<li><p>If things don’t work at first, stop the docker process completely and run this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose <span class="at">-f</span> docker-compose.dev.yml <span class="at">-p</span> danswer-stack up <span class="at">-d</span> <span class="at">--pull</span> always <span class="at">--force-recreate</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>Sometimes this is required to run a few times to make sure the <code>.env</code> file is being used for some reason.</p></li>
<li><p>Potentially restart ollama and docker if that doesn’t work</p></li>
</ul></li>
<li><p><em>(bonus)</em> For anyone running MacOS 13 or higher, open the link in Safari and from the menu bar, choose File &gt; Add to Dock. This will create a standalone webapp.</p>
<ul>
<li>More info here: <a href="https://support.apple.com/en-us/104996" class="uri">https://support.apple.com/en-us/104996</a></li>
</ul></li>
</ol>
</section>
<section id="code-completion-and-generation-using-continue" class="level2">
<h2 class="anchored" data-anchor-id="code-completion-and-generation-using-continue">Code completion and generation using Continue</h2>
<p>I haven’t tested this one yet, but it was on the ollama blog and should work well using the local LLMs installed with ollama. Continue acts as your own AI code assistant within your IDE. It works with VScode and JetBrains for now.</p>
<p>Continue: <a href="https://www.continue.dev/" class="uri">https://www.continue.dev/</a></p>
<p>VScode extension: <a href="https://marketplace.visualstudio.com/items?itemName=Continue.continue" class="uri">https://marketplace.visualstudio.com/items?itemName=Continue.continue</a></p>
<p>ollama blog post: <a href="https://ollama.com/blog/continue-code-assistant" class="uri">https://ollama.com/blog/continue-code-assistant</a></p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/V3Yq6w9QaxI?si=K1Jo0z7y_NbMCUX4" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>